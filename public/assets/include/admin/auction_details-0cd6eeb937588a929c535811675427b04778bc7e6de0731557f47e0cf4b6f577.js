var auction_details={initController:function(){auction_details.eventShowDetails()},tokenForm:function(){return $('meta[name="csrf-token"]').attr("content")},eventShowDetails:function(){$(".show-details").on("click",function(){var t=$(this).attr("details-id");auction_details.ajaxShowDetails(t),auction_details.eventRemove(t)})},ajaxShowDetails:function(t){$.ajax({url:"/admin/auctions/"+t,type:"GET",contentType:"application/json; charset=utf-8",dataType:"JSON",async:!1,success:function(t){var e="",n=$("#data-template").html();$.each(t,function(t,a){e+=Mustache.render(n,{ID:a.id,NAME:a.user.name,BID:auction_details.formatPrice(a.bid)+" \u0111",STATUS:"loser"===a.status,STATUS1:"win"===a.status})}),$("tbody#viewLoad").html(e)},error:function(t){console.log(t)}})},eventRemove:function(t){$(".remove-item").on("click",function(){var e=$(this),n=e.attr("remove-id");auction_details.confirmDelete(t,n,e)})},confirmDelete:function(t,e,n){swal({title:I18n.t("javascripts.include.admin.auction_detail.are-u-sure"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:I18n.t("javascripts.include.admin.auction_detail.delete"),cancelButtonText:I18n.t("javascripts.include.admin.auction_detail.cancel")}).then(()=>{auction_details.requestAjaxDelete(t,e,n)})},requestAjaxDelete:function(t,e,n){$.ajax({url:"/admin/auction_details/"+e,method:"delete",beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",auction_details.tokenForm())},async:!1,success:function(t){t?n.parents("tr").remove():auction_details.not_enough_notify()},statusCode:{400:function(){auction_details.not_enough_notify()}}})},not_enough_notify:function(){$(".top-right").notify({message:{text:I18n.t("javascripts.include.admin.auction_detail.action-failed")}}).show()},formatPrice:function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}};$(document).ready(function(){auction_details.initController()});