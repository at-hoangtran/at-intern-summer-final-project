function fmtMSS(t){var i=t.split(":");return 60*+i[0]*60+ +i[1]}var time={start:null,end:null};$(document).ready(function(){$("#frmTimer").validate({ignore:[],rules:{"timer[product_id]":{required:!0},"timer[start_at]":{required:!0,stime:!0,mxtime:!0},"timer[end_at]":{required:!0,edtime:!0,mxtime:!0,min2:!0},"timer[period]":{required:!0,period:!0},"timer[step]":{required:!0}},messages:{"timer[product_id]":{required:"Vui l\xf2ng ch\u1ecdn t\xean s\u1ea3n ph\u1ea9m !"},"timer[start_at]":{required:"Vui l\xf2ng ch\u1ecdn th\u1eddi gian b\u1eaft \u0111\u1ea7u !",stime:"Th\u1eddi gian b\u1eaft \u0111\u1ea7u ph\u1ea3i nh\u1ecf h\u01a1n th\u1eddi gian k\u1ebft th\xfac !",mxtime:"Vui l\xf2ng ch\u1ecdn khung gi\u1edd t\u1eeb (8h AM - 23h PM)"},"timer[end_at]":{required:"Vui l\xf2ng ch\u1ecdn th\u1eddi gian k\u1ebft th\xfac !",edtime:"Th\u1eddi gian k\u1ebft th\xfac ph\u1ea3i l\u1edbn h\u01a1n th\u1eddi gian b\u1eaft \u0111\u1ea7u !",mxtime:"Vui l\xf2ng ch\u1ecdn khung gi\u1edd t\u1eeb (8h AM - 23h PM)",min2:"Kho\u1ea3ng th\u1eddi gian b\u1eaft \u0111\u1ea7u v\xe0 k\u1ebft th\xfac ph\u1ea3i l\u1edbn h\u01a1n 2p!"},"timer[period]":{required:"Vui l\xf2ng ch\u1ecdn th\u1eddi gian \u0111\u1ebfm ng\u01b0\u1ee3c !",period:"Vui ch\u1ecdn th\u1eddi gian \u0111\u1ebfm ng\u01b0\u1ee3c ph\u1ea3i tr\xean 20 gi\xe2y !"},"timer[step]":{required:"Vui l\xf2ng ch\u1ecdn b\u01b0\u1edbc t\u0103ng ti\u1ec1n !"}},highlight:function(t){$(t).closest(".control-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".control-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(t,i){i.parent(".input-group").length?t.insertAfter(i.parent()):t.insertAfter(i)}})}),$(document).on("turbolinks:load",function(){time.start=fmtMSS($('input[name="timer[start_at]"]').val()),time.end=fmtMSS($('input[name="timer[end_at]"]').val())}),$.validator.addMethod("mxtime",function(t){var i=fmtMSS(t);return!(i<28800||i>82800)}),$.validator.addMethod("stime",function(t){var i=fmtMSS(t);return time.start=i,null===time.end||!(time.start>time.end||time.end===time.start)}),$.validator.addMethod("edtime",function(t){var i=fmtMSS(t);return time.end=i,null===time.start||!(time.end<time.start||time.end===time.start)}),$.validator.addMethod("min2",function(){return null===time.start||(subtimer=time.end-time.start<2,!subtimer)}),$.validator.addMethod("period",function(t){var i=t.split(":")[0],e=t.split(":")[1];return!(0==i&&e<20)});